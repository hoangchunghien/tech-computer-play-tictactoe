(this["webpackJsonprl-tictactoe-js"]=this["webpackJsonprl-tictactoe-js"]||[]).push([[0],{131:function(e,t,n){},132:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},137:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(31),r=n.n(c),s=(n(131),n(26)),l=n(69),o=n(30),j=n(68),d=n(61),u=n(38),b=n(216),O=n(218),h=n(50),g=n(214),p=n(217),x=n(215),v=n(4),f=n.n(v),y=n(9),m="X",w="O",k="-",S=function(){return{turn:m,winner:null,gameover:!1,board:[k,k,k,k,k,k,k,k,k]}},A=function(e,t){var n=e.turn,a=e.board;if(!C(a).includes(t))return e;var i=Object(l.a)(a);return i[t]=n,{turn:n=n===m?w:m,winner:Q(i),gameover:E(i),board:i}},C=function(e){for(var t=[],n=0;n<e.length;n++)e[n]===k&&t.push(n);return t},Q=function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<t.length;n++){var a=Object(o.a)(t[n],3),i=a[0],c=a[1],r=a[2];if(e[i]!==k&&e[i]===e[c]&&e[i]===e[r])return e[i]}return null},E=function(e){return Object(y.every)(e,(function(e){return e!==k}))||!!Q(e)},I=function(e){return e.join("")},N=function(e,t){var n=e.gameover,a=e.winner;return n&&a?a===t?10:-10:0},T=(n(132),n(6)),P=function(e){var t=e.value,n=e.clickable,a=e.evaluateScore,i=e.highlight,c=e.onClick,r=void 0===c?function(){}:c,s=["square"];return n?s.push("clickable"):s.push("unclickable"),i&&s.push("highlight"),Object(T.jsx)("button",{className:f()(s),onClick:function(){n&&r()},children:Object(T.jsxs)("div",{style:{position:"relative",height:"100%"},children:[Object(T.jsx)("span",{children:t!==k?t:" "}),null!==a&&t===k?Object(T.jsx)("span",{style:{position:"absolute",left:"6px",bottom:"2px",fontSize:"10px",lineHeight:"10px",fontWeight:"bold"},children:Number(a).toFixed(4)}):""]})})},X=(n(134),function(e){var t=e.value,n=void 0===t?Object(y.pad)("",9," "):t,a=e.validMoves,i=void 0===a?[]:a,c=e.evaluateBoard,r=void 0===c?Object(y.map)(Object(y.range)(0,9),(function(){return null})):c,s=e.bestAction,l=void 0===s?null:s,o=e.onClick,j=void 0===o?function(e){return e}:o;return Object(T.jsx)("div",{className:"board",children:Object(y.map)(Object(y.chunk)(Object(y.take)(n,9),3),(function(e,t){return Object(T.jsx)("div",{className:"row",children:Object(y.map)(e,(function(e,n){return Object(T.jsx)(P,{value:e,highlight:l==3*t+n,evaluateScore:r[3*t+n],clickable:i.includes(3*t+n),onClick:function(){return j(3*t+n)}})}))})}))})}),W=(n(135),function(e){var t=e.turn,n=e.winner,a=e.gameover,i=e.board,c=e.evaluateBoard,r=e.bestAction,s=e.onMove,l=void 0===s?function(e){return e}:s;"Player: ".concat(t);return Object(T.jsxs)("div",{className:"game",children:[Object(T.jsx)(d.a,{children:Object(T.jsx)(u.a,{children:Object(T.jsx)("h1",{children:"TICTACTOE"})})}),!a&&Object(T.jsx)(d.a,{children:Object(T.jsx)(u.a,{children:Object(T.jsxs)("div",{className:"status",children:["Player: ",Object(T.jsx)("b",{style:{border:"solid 1px",padding:"3px"},children:t})]})})}),a&&Object(T.jsxs)(d.a,{gutter:[16,16],children:[Object(T.jsx)(u.a,{children:Object(T.jsx)("div",{className:"status",children:"GAMEOVER"})}),n?Object(T.jsx)(u.a,{children:Object(T.jsxs)("div",{className:"status",children:[Object(T.jsx)("b",{style:{border:"solid 1px",padding:"3px"},children:n})," WIN"]})}):Object(T.jsx)(u.a,{children:Object(T.jsx)("div",{className:"status",children:"DRAW"})})]}),Object(T.jsx)(X,{value:I(i),bestAction:r,evaluateBoard:c,validMoves:a?[]:C(i),onClick:function(e){l(e)}})]})}),M=n(58),z=w,L=n(70),B=function e(t){var n=t.player,a=void 0===n?m:n;Object(L.a)(this,e),this.policy=function(e){for(var t=e.board,n=C(t),a=Object(y.range)(0,9,0),i=0;i<n.length;i++){a[n[i]]=1/n.length}return a},this.newEpisode=function(){},this.observe=function(){},this.learn=function(){},this.player=a},R=function e(t){var n=this,a=t.epsilon,i=void 0===a?.1:a,c=t.discount,r=void 0===c?.9:c,s=t.player,l=void 0===s?w:s;Object(L.a)(this,e),this.policy=function(e){for(var t=e.board,a=C(t),i=I(t),c=Object(y.range)(0,9,0),r=Object(y.clone)(n.Q[i]),s=Object(y.pullAt)(r,a),l=Object(y.max)(s),o=a[s.indexOf(l)],j=0;j<a.length;j++){c[a[j]]=n.epsilon/a.length}a.includes(o)?c[o]+=1-n.epsilon:c[Object(y.sample)(a)]+=1-n.epsilon;return c},this.learn=function(){var e=n.episode;if(e.length>0&&e[e.length-1][0].gameover)for(var t=0;t<e.length-1;t++){for(var a=e[t],i=a[0],c=a[1],r=0,s=n.discount,l=I(i.board),o=t+1;o<e.length;o++){var j=e[o][0];r+=N(j,n.player)*s,s*=n.discount}n.returnSums[l][c]+=r,n.returnCounts[l][c]+=1,n.Q[l][c]=n.returnSums[l][c]/n.returnCounts[l][c]}},this.observe=function(e,t){n.episode.push([e,t])},this.newEpisode=function(){n.episode=[]},this.epsilon=i,this.discount=r,this.episode=[],this.player=l,this.Q=new Proxy({},{get:function(e,t){return t in e||(e[t]=Object(y.range)(0,9,0)),e[t]}}),this.returnSums=new Proxy({},{get:function(e,t){return t in e||(e[t]=Object(y.range)(0,9,0)),e[t]}}),this.returnCounts=new Proxy({},{get:function(e,t){return t in e||(e[t]=Object(y.range)(0,9,0)),e[t]}})},F=function e(t){var n=this,a=t.epsilon,i=void 0===a?.1:a,c=t.discount,r=void 0===c?.9:c,s=t.alpha,l=void 0===s?.01:s,o=t.player,j=void 0===o?w:o;Object(L.a)(this,e),this.policy=function(e){for(var t=e.board,a=C(t),i=I(t),c=Object(y.range)(0,9,0),r=Object(y.clone)(n.Q[i]),s=Object(y.pullAt)(r,a),l=Object(y.max)(s),o=a[s.indexOf(l)],j=0;j<a.length;j++){c[a[j]]=n.epsilon/a.length}a.includes(o)?c[o]+=1-n.epsilon:c[Object(y.sample)(a)]+=1-n.epsilon;return c},this.learn=function(){var e=n.episode;if(e.length>=2){var t=e[e.length-2],a=e[e.length-1],i=t[0],c=t[1],r=a[0],s=a[1],l=N(r,n.player),o=I(i.board),j=I(r.board),d=r.gameover?0:n.Q[j][s],u=l+n.discount*d-n.Q[o][c];n.Q[o][c]+=n.alpha*u}},this.observe=function(e,t){n.episode.push([e,t])},this.newEpisode=function(){n.episode=[]},this.epsilon=i,this.discount=r,this.alpha=l,this.player=j,this.episode=[],this._Q={},this.Q=new Proxy(this._Q,{get:function(e,t){return t in e||(e[t]=Object(y.range)(0,9,0)),e[t]}})},D=function e(t){var n=this,a=t.epsilon,i=void 0===a?.1:a,c=t.discount,r=void 0===c?.9:c,s=t.alpha,l=void 0===s?.01:s,o=t.player,j=void 0===o?w:o;Object(L.a)(this,e),this.policy=function(e){for(var t=e.board,a=C(t),i=I(t),c=Object(y.range)(0,9,0),r=Object(y.clone)(n.Q[i]),s=Object(y.pullAt)(r,a),l=Object(y.max)(s),o=a[s.indexOf(l)],j=0;j<a.length;j++){c[a[j]]=n.epsilon/a.length}a.includes(o)?c[o]+=1-n.epsilon:c[Object(y.sample)(a)]+=1-n.epsilon;return c},this.learn=function(){var e=n.episode;if(e.length>=2){var t=e[e.length-2],a=e[e.length-1],i=t[0],c=t[1],r=a[0],s=N(r,n.player),l=I(i.board),o=I(r.board),j=r.gameover?0:Object(y.max)(n.Q[o]),d=s+n.discount*j-n.Q[l][c];n.Q[l][c]+=n.alpha*d}},this.observe=function(e,t){n.episode.push([e,t])},this.newEpisode=function(){n.episode=[]},this.epsilon=i,this.discount=r,this.alpha=l,this.player=j,this.episode=[],this._Q={},this.Q=new Proxy(this._Q,{get:function(e,t){return t in e||(e[t]=Object(y.range)(0,9,0)),e[t]}})},G=(n(137),j.a.Option),V=[{title:"Random Agent",agent:new B({player:m})},{title:"Monte Carlo Agent",agent:new R({player:m})},{title:"Sarsa Agent",agent:new F({player:m})},{title:"Q-Learning Agent",agent:new D({player:m})}],_=[{title:"Random Agent",agent:new B({player:w})},{title:"Monte Carlo Agent",agent:new R({player:w})},{title:"Sarsa Agent",agent:new F({player:w})},{title:"Q-Learning Agent",agent:new D({player:w})}];var J=function(){var e=Object(a.useState)(S()),t=Object(o.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(1e3),r=Object(o.a)(c,2),v=r[0],f=r[1],w=Object(a.useState)(1e3),k=Object(o.a)(w,2),C=k[0],Q=k[1],E=Object(a.useState)(0),N=Object(o.a)(E,2),P=(N[0],N[1],Object(a.useState)(!1)),X=Object(o.a)(P,2),L=X[0],B=X[1],R=Object(a.useState)([]),F=Object(o.a)(R,2),D=F[0],J=F[1],q=Object(a.useState)([]),H=Object(o.a)(q,2),U=H[0],K=H[1],Y=Object(a.useState)({agent:V[0],playmode:!1}),Z=Object(o.a)(Y,2),$=Z[0],ee=Z[1],te=Object(a.useState)({agent:_[2],playmode:!0}),ne=Object(o.a)(te,2),ae=ne[0],ie=ne[1],ce=Object(a.useState)(Object(y.map)(Object(y.range)(0,9),(function(){return null}))),re=Object(o.a)(ce,2),se=re[0],le=re[1],oe=Object(a.useState)(null),je=Object(o.a)(oe,2),de=je[0],ue=je[1];Object(a.useEffect)((function(){var e=null;if((e=n.turn===m?$:ae).playmode){var t=e.agent.agent,a=t.policy(n),c=Object(y.max)(a);a=Object(y.map)(a,(function(e,t){return{index:t,prob:e}}));var r=Object(M.select)(Object(y.filter)(a,(function(e){return e.prob==c})));if(r=r.index,console.log("Q"),console.log(t.Q&&t.Q[I(n.board)]),console.log("A"),console.log(a),t.observe(n,r),t.learn(),!n.gameover){var s=A(n,r);i(s),le(Object(y.map)(Object(y.range)(0,9),(function(){return null})))}}}));var be=function(){B(!0);var e=function(e){for(var t=e.agent,n=e.againstAgent,a=e.playType,i=void 0===a?z:a,c=e.episodes,r=void 0===c?1e3:c,s={X:0,O:0,draw:0,total:r},l=1;l<=r;l++){var o=S();t.newEpisode(),n.newEpisode();for(var j=0;j<=100;j++){var d=null,u=null;o.turn===i?(d=t,u=n):(d=n,u=t);var b=d.policy(o),O=o.gameover?-1:Object(M.select)(Object(y.range)(b.length),b);if(d.observe(o,O),d.learn(),o.gameover){u.observe(o,-1),u.learn();break}o=A(o,O)}o.winner?s[o.winner]+=1:s.draw+=1}return s}({agent:ae.agent.agent,againstAgent:$.agent.agent,playType:z,episodes:v});J([e].concat(Object(l.a)(D))),B(!1)},Oe=function(){var e=function(e){for(var t=e.agent,n=e.againstAgent,a=e.playType,i=void 0===a?z:a,c=e.episodes,r=void 0===c?1e3:c,s={X:0,draw:0,O:0,total:r},l=0;l<r;l++){var o=S();t.newEpisode(),n.newEpisode();for(var j=0;j<100;j++){var d=(o.turn===i?t:n).policy(o),u=o.gameover?-1:Object(M.select)(Object(y.range)(d.length),d);o.gameover||(o=A(o,u))}o.winner?s[o.winner]+=1:s.draw+=1}return s}({agent:ae.agent.agent,againstAgent:$.agent.agent,playType:z,episodes:C});K([e].concat(Object(l.a)(U)))},he=function(e){var t=e.policy(n);e.Q&&(t=e.Q[I(n.board)]),le(t);var a=e.policy(n),i=Object(y.max)(a);a=Object(y.map)(a,(function(e,t){return{index:t,prob:e}}));var c=Object(M.select)(Object(y.filter)(a,(function(e){return e.prob==i})));c=c.index,ue(c)};return Object(T.jsxs)("div",{className:"App",children:[Object(T.jsxs)(d.a,{justify:"center",align:"stretch",gutter:[16,16],children:[Object(T.jsx)(u.a,{children:Object(T.jsxs)(b.a,{style:{width:360,height:"100%"},title:"SETTINGS",children:[Object(T.jsxs)(d.a,{gutter:[16,16],align:"stretch",children:[Object(T.jsx)(u.a,{md:8,children:Object(T.jsxs)("div",{className:"status",children:["Player"," ",Object(T.jsx)("b",{style:{border:"solid 1px",padding:"1px"},children:"X"})]})}),Object(T.jsx)(u.a,{md:16,children:Object(T.jsx)("div",{children:Object(T.jsx)(j.a,{defaultValue:$.agent.title,style:{minWidth:"100%"},onChange:function(e){return ee(Object(s.a)(Object(s.a)({},$),{},{agent:Object(y.find)(V,{title:e})}))},children:Object(y.map)(V,(function(e,t){var n=e.title;return Object(T.jsx)(G,{value:n,children:n},t)}))})})})]}),Object(T.jsxs)(d.a,{children:[Object(T.jsx)(u.a,{md:8}),Object(T.jsxs)(u.a,{md:16,children:[Object(T.jsxs)(d.a,{gutter:[8,8],justify:"space-between",children:[Object(T.jsx)(u.a,{children:Object(T.jsxs)(d.a,{gutter:8,children:[Object(T.jsx)(u.a,{children:"Auto"}),Object(T.jsx)(u.a,{children:Object(T.jsx)(O.a,{size:"small",checked:$.playmode,onChange:function(e){return ee(Object(s.a)(Object(s.a)({},$),{},{playmode:e}))}})})]})}),Object(T.jsx)(u.a,{children:Object(T.jsx)(h.a,{size:"small",disabled:$.playmode,onClick:function(){return he($.agent.agent)},children:"Evaluate action"})})]}),Object(T.jsx)(d.a,{})]})]}),Object(T.jsx)(g.a,{}),Object(T.jsxs)(d.a,{gutter:[16,16],children:[Object(T.jsx)(u.a,{md:8,children:Object(T.jsxs)("div",{className:"status",children:["Player"," ",Object(T.jsx)("b",{style:{border:"solid 1px",padding:"1px"},children:"O"})]})}),Object(T.jsx)(u.a,{md:16,children:Object(T.jsx)(j.a,{defaultValue:ae.agent.title,style:{minWidth:"100%"},onChange:function(e){return ie(Object(s.a)(Object(s.a)({},ae),{},{agent:Object(y.find)(_,{title:e})}))},children:Object(y.map)(_,(function(e,t){var n=e.title;return Object(T.jsx)(G,{value:n,children:n},t)}))})})]}),Object(T.jsxs)(d.a,{children:[Object(T.jsx)(u.a,{md:8}),Object(T.jsxs)(u.a,{md:16,children:[Object(T.jsxs)(d.a,{gutter:[8,8],justify:"space-between",children:[Object(T.jsx)(u.a,{children:Object(T.jsxs)(d.a,{gutter:8,children:[Object(T.jsx)(u.a,{children:"Auto"}),Object(T.jsx)(u.a,{children:Object(T.jsx)(O.a,{size:"small",checked:ae.playmode,onChange:function(e){return ie(Object(s.a)(Object(s.a)({},ae),{},{playmode:e}))}})})]})}),Object(T.jsx)(u.a,{children:Object(T.jsx)(h.a,{size:"small",disabled:ae.playmode,onClick:function(){return he(ae.agent.agent)},children:"Evaluate action"})})]}),Object(T.jsx)(d.a,{})]})]})]})}),Object(T.jsx)(u.a,{children:Object(T.jsxs)(b.a,{style:{width:360},children:[Object(T.jsx)(d.a,{justify:"center",align:"middle",gutter:[16,16],children:Object(T.jsx)(u.a,{children:Object(T.jsx)(W,Object(s.a)(Object(s.a)({},n),{},{onMove:function(e){var t=A(n,e);i(t)},evaluateBoard:se,bestAction:de}))})}),Object(T.jsx)(d.a,{justify:"center",align:"middle",gutter:[16,16],style:{height:60},children:Object(T.jsx)(u.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)("button",{onClick:function(){i(S()),$.agent.agent.newEpisode(),ae.agent.agent.newEpisode(),ue(null),le(Object(y.map)(Object(y.range)(0,9),(function(){return null})))},children:"Reset Game"})})})})]})})]}),Object(T.jsxs)(d.a,{justify:"center",align:"stretch",gutter:[16,16],style:{marginTop:"16px"},children:[Object(T.jsx)(u.a,{children:Object(T.jsxs)(b.a,{title:"TRAINING",style:{width:360},children:[Object(T.jsxs)(d.a,{justify:"center",align:"middle",gutter:[8,8],children:[Object(T.jsx)(u.a,{children:"Episodes"}),Object(T.jsx)(u.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)(p.a,{value:v,type:"number",onChange:function(e){return f(e)}})})}),Object(T.jsx)(u.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)(h.a,{type:"primary",onClick:function(){return be()},disabled:L,children:"Simulate"})})})]}),Object(T.jsx)(d.a,{gutter:[16,16],children:Object(T.jsx)(u.a,{children:Object(T.jsx)(x.a,{columns:[{title:"#",dataIndex:"index",key:"index"},{title:"X Win",dataIndex:"X",key:"X"},{title:"O Win",dataIndex:"O",key:"O"},{title:"Draw",dataIndex:"draw",key:"draw"},{title:"Total",dataIndex:"total",key:"total"}],dataSource:Object(y.map)(D,(function(e,t){return Object(s.a)(Object(s.a)({},e),{},{index:t})})),pagination:{pageSize:3,hideOnSinglePage:!0,showLessItems:!0}})})})]})}),Object(T.jsx)(u.a,{children:Object(T.jsxs)(b.a,{title:"EVALUATE",style:{width:360},children:[Object(T.jsxs)(d.a,{justify:"center",align:"middle",gutter:[8,8],children:[Object(T.jsx)(u.a,{children:"Episodes"}),Object(T.jsx)(u.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)(p.a,{value:C,type:"number",onChange:function(e){return Q(e)}})})}),Object(T.jsx)(u.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)(h.a,{type:"primary",onClick:function(){return Oe()},children:"Evaluate"})})})]}),Object(T.jsx)(d.a,{gutter:[16,16],children:Object(T.jsx)(u.a,{children:Object(T.jsx)(x.a,{columns:[{title:"#",dataIndex:"index",key:"index"},{title:"X Win",dataIndex:"X",key:"X"},{title:"O Win",dataIndex:"O",key:"O"},{title:"Draw",dataIndex:"draw",key:"draw"},{title:"Total",dataIndex:"total",key:"total"}],dataSource:Object(y.map)(U,(function(e,t){return Object(s.a)(Object(s.a)({},e),{},{index:t})})),pagination:{pageSize:3,hideOnSinglePage:!0,showLessItems:!0}})})})]})})]})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,219)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(J,{})}),document.getElementById("root")),q()}},[[212,1,2]]]);
//# sourceMappingURL=main.37c86056.chunk.js.map