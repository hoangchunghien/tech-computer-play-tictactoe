(this["webpackJsonprl-tictactoe-js"]=this["webpackJsonprl-tictactoe-js"]||[]).push([[0],{131:function(e,t,n){},132:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},137:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(31),r=n.n(i),l=(n(131),n(26)),s=n(69),j=n(30),d=n(68),o=n(61),b=n(38),u=n(216),O=n(218),h=n(50),x=n(214),g=n(217),p=n(215),v=n(4),f=n.n(v),m=n(17),y="X",w="O",k="-",S=function(){return{turn:y,winner:null,gameover:!1,board:[k,k,k,k,k,k,k,k,k]}},A=function(e,t){var n=e.turn,a=e.board;if(!C(a).includes(t))return e;var c=Object(s.a)(a);return c[t]=n,{turn:n=n===y?w:y,winner:E(c),gameover:I(c),board:c}},C=function(e){for(var t=[],n=0;n<e.length;n++)e[n]===k&&t.push(n);return t},E=function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<t.length;n++){var a=Object(j.a)(t[n],3),c=a[0],i=a[1],r=a[2];if(e[c]!==k&&e[c]===e[i]&&e[c]===e[r])return e[c]}return null},I=function(e){return Object(m.every)(e,(function(e){return e!==k}))||!!E(e)},N=function(e){return e.join("")},T=(n(132),n(6)),Q=function(e){var t=e.value,n=e.clickable,a=e.evaluateScore,c=e.highlight,i=e.onClick,r=void 0===i?function(){}:i,l=["square"];return n?l.push("clickable"):l.push("unclickable"),c&&l.push("highlight"),Object(T.jsx)("button",{className:f()(l),onClick:function(){n&&r()},children:Object(T.jsxs)("div",{style:{position:"relative",height:"100%"},children:[Object(T.jsx)("span",{children:t!==k?t:" "}),null!==a&&t===k?Object(T.jsx)("span",{style:{position:"absolute",left:"6px",bottom:"2px",fontSize:"10px",lineHeight:"10px",fontWeight:"bold"},children:Number(a).toFixed(4)}):""]})})},X=(n(134),function(e){var t=e.value,n=void 0===t?Object(m.pad)("",9," "):t,a=e.validMoves,c=void 0===a?[]:a,i=e.evaluateBoard,r=void 0===i?Object(m.map)(Object(m.range)(0,9),(function(){return null})):i,l=e.bestAction,s=void 0===l?null:l,j=e.onClick,d=void 0===j?function(e){return e}:j;return Object(T.jsx)("div",{className:"board",children:Object(m.map)(Object(m.chunk)(Object(m.take)(n,9),3),(function(e,t){return Object(T.jsx)("div",{className:"row",children:Object(m.map)(e,(function(e,n){return Object(T.jsx)(Q,{value:e,highlight:s==3*t+n,evaluateScore:r[3*t+n],clickable:c.includes(3*t+n),onClick:function(){return d(3*t+n)}})}))})}))})}),P=(n(135),function(e){var t=e.turn,n=e.winner,a=e.gameover,c=e.board,i=e.evaluateBoard,r=e.bestAction,l=e.onMove,s=void 0===l?function(e){return e}:l;"Player: ".concat(t);return Object(T.jsxs)("div",{className:"game",children:[Object(T.jsx)(o.a,{children:Object(T.jsx)(b.a,{children:Object(T.jsx)("h1",{children:"TICTACTOE"})})}),!a&&Object(T.jsx)(o.a,{children:Object(T.jsx)(b.a,{children:Object(T.jsxs)("div",{className:"status",children:["Player: ",Object(T.jsx)("b",{style:{border:"solid 1px",padding:"3px"},children:t})]})})}),a&&Object(T.jsxs)(o.a,{gutter:[16,16],children:[Object(T.jsx)(b.a,{children:Object(T.jsx)("div",{className:"status",children:"GAMEOVER"})}),n?Object(T.jsx)(b.a,{children:Object(T.jsxs)("div",{className:"status",children:[Object(T.jsx)("b",{style:{border:"solid 1px",padding:"3px"},children:n})," WIN"]})}):Object(T.jsx)(b.a,{children:Object(T.jsx)("div",{className:"status",children:"DRAW"})})]}),Object(T.jsx)(X,{value:N(c),bestAction:r,evaluateBoard:i,validMoves:a?[]:C(c),onClick:function(e){s(e)}})]})}),W=n(58),z=w,B=n(98),M=function e(t){var n=t.player,a=void 0===n?y:n;Object(B.a)(this,e),this.policy=function(e){for(var t=e.board,n=C(t),a=Object(m.range)(0,9,0),c=0;c<n.length;c++){a[n[c]]=1/n.length}return a},this.newEpisode=function(){},this.observe=function(){},this.learn=function(){},this.player=a},R=function e(t){var n=this,a=t.epsilon,c=void 0===a?.1:a,i=t.discount,r=void 0===i?.9:i,l=t.alpha,s=void 0===l?.01:l,j=t.player,d=void 0===j?w:j;Object(B.a)(this,e),this.policy=function(e){for(var t=e.board,a=C(t),c=N(t),i=Object(m.range)(0,9,0),r=Object(m.clone)(n.Q[c]),l=Object(m.pullAt)(r,a),s=Object(m.max)(l),j=a[l.indexOf(s)],d=0;d<a.length;d++){i[a[d]]=n.epsilon/a.length}a.includes(j)?i[j]+=1-n.epsilon:i[Object(m.sample)(a)]+=1-n.epsilon;return i},this.learn=function(){var e=n.episode;if(e.length>=2){var t=e[e.length-2],a=e[e.length-1],c=t[0],i=t[1],r=a[0],l=a[1],s=function(e,t){var n=e.gameover,a=e.winner;return n&&a?a===t?10:-10:0}(r,n.player),j=N(c.board),d=N(r.board),o=r.gameover?0:n.Q[d][l],b=s+n.discount*o-n.Q[j][i];n.Q[j][i]+=n.alpha*b}},this.observe=function(e,t){n.episode.push([e,t])},this.newEpisode=function(){n.episode=[]},this.epsilon=c,this.discount=r,this.alpha=s,this.player=d,this.episode=[],this._Q={},this.Q=new Proxy(this._Q,{get:function(e,t){return t in e||(e[t]=Object(m.range)(0,9,0)),e[t]}})},F=(n(137),d.a.Option),L=[{title:"Random Agent",agent:new M({player:y})},{title:"Sarsa Agent",agent:new R({player:y})}],D=[{title:"Random Agent",agent:new M({player:w})},{title:"Sarsa Agent",agent:new R({player:w})}];var G=function(){var e=Object(a.useState)(S()),t=Object(j.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(1e3),r=Object(j.a)(i,2),v=r[0],f=r[1],w=Object(a.useState)(1e3),k=Object(j.a)(w,2),C=k[0],E=k[1],I=Object(a.useState)(0),Q=Object(j.a)(I,2),X=(Q[0],Q[1],Object(a.useState)(!1)),B=Object(j.a)(X,2),M=B[0],R=B[1],G=Object(a.useState)([]),V=Object(j.a)(G,2),J=V[0],_=V[1],q=Object(a.useState)([]),H=Object(j.a)(q,2),U=H[0],K=H[1],Y=Object(a.useState)({agent:L[1],playmode:!1}),Z=Object(j.a)(Y,2),$=Z[0],ee=Z[1],te=Object(a.useState)({agent:D[1],playmode:!0}),ne=Object(j.a)(te,2),ae=ne[0],ce=ne[1],ie=Object(a.useState)(Object(m.map)(Object(m.range)(0,9),(function(){return null}))),re=Object(j.a)(ie,2),le=re[0],se=re[1],je=Object(a.useState)(null),de=Object(j.a)(je,2),oe=de[0],be=de[1];Object(a.useEffect)((function(){var e=null;if((e=n.turn===y?$:ae).playmode){var t=e.agent.agent,a=t.policy(n),i=Object(m.max)(a);a=Object(m.map)(a,(function(e,t){return{index:t,prob:e}}));var r=Object(W.select)(Object(m.filter)(a,(function(e){return e.prob==i})));if(r=r.index,console.log("Q"),console.log(t.Q&&t.Q[N(n.board)]),console.log("A"),console.log(a),t.observe(n,r),t.learn(),!n.gameover){var l=A(n,r);c(l),se(Object(m.map)(Object(m.range)(0,9),(function(){return null})))}}}));var ue=function(){R(!0);var e=function(e){for(var t=e.agent,n=e.againstAgent,a=e.playType,c=void 0===a?z:a,i=e.episodes,r=void 0===i?1e3:i,l={X:0,O:0,draw:0,total:r},s=1;s<=r;s++){var j=S();t.newEpisode(),n.newEpisode();for(var d=0;d<=100;d++){var o=null,b=(o=j.turn===c?t:n).policy(j),u=j.gameover?-1:Object(W.select)(Object(m.range)(b.length),b);o.observe(j,u),o.learn(),j.gameover||(j=A(j,u))}j.winner?l[j.winner]+=1:l.draw+=1}return l}({agent:ae.agent.agent,againstAgent:$.agent.agent,playType:z,episodes:v});_([e].concat(Object(s.a)(J))),R(!1)},Oe=function(){var e=function(e){for(var t=e.agent,n=e.againstAgent,a=e.playType,c=void 0===a?z:a,i=e.episodes,r=void 0===i?1e3:i,l={X:0,draw:0,O:0,total:r},s=0;s<r;s++){var j=S();t.newEpisode(),n.newEpisode();for(var d=0;d<100;d++){var o=(j.turn===c?t:n).policy(j),b=j.gameover?-1:Object(W.select)(Object(m.range)(o.length),o);j.gameover||(j=A(j,b))}j.winner?l[j.winner]+=1:l.draw+=1}return l}({agent:ae.agent.agent,againstAgent:$.agent.agent,playType:z,episodes:C});K([e].concat(Object(s.a)(U)))},he=function(e){var t=e.policy(n);e.Q&&(t=e.Q[N(n.board)]),se(t);var a=e.policy(n),c=Object(m.max)(a);a=Object(m.map)(a,(function(e,t){return{index:t,prob:e}}));var i=Object(W.select)(Object(m.filter)(a,(function(e){return e.prob==c})));i=i.index,be(i)};return Object(T.jsxs)("div",{className:"App",children:[Object(T.jsxs)(o.a,{justify:"center",align:"stretch",gutter:[16,16],children:[Object(T.jsx)(b.a,{children:Object(T.jsxs)(u.a,{style:{width:360,height:"100%"},title:"SETTINGS",children:[Object(T.jsxs)(o.a,{gutter:[16,16],align:"stretch",children:[Object(T.jsx)(b.a,{md:8,children:Object(T.jsxs)("div",{className:"status",children:["Player"," ",Object(T.jsx)("b",{style:{border:"solid 1px",padding:"1px"},children:"X"})]})}),Object(T.jsx)(b.a,{md:16,children:Object(T.jsx)("div",{children:Object(T.jsx)(d.a,{defaultValue:$.agent.title,style:{minWidth:"100%"},onChange:function(e){return ee(Object(l.a)(Object(l.a)({},$),{},{agent:Object(m.find)(L,{title:e})}))},children:Object(m.map)(L,(function(e,t){var n=e.title;return Object(T.jsx)(F,{value:n,children:n},t)}))})})})]}),Object(T.jsxs)(o.a,{children:[Object(T.jsx)(b.a,{md:8}),Object(T.jsxs)(b.a,{md:16,children:[Object(T.jsxs)(o.a,{gutter:[8,8],justify:"space-between",children:[Object(T.jsx)(b.a,{children:Object(T.jsxs)(o.a,{gutter:8,children:[Object(T.jsx)(b.a,{children:"Auto"}),Object(T.jsx)(b.a,{children:Object(T.jsx)(O.a,{size:"small",checked:$.playmode,onChange:function(e){return ee(Object(l.a)(Object(l.a)({},$),{},{playmode:e}))}})})]})}),Object(T.jsx)(b.a,{children:Object(T.jsx)(h.a,{size:"small",disabled:$.playmode,onClick:function(){return he($.agent.agent)},children:"Evaluate action"})})]}),Object(T.jsx)(o.a,{})]})]}),Object(T.jsx)(x.a,{}),Object(T.jsxs)(o.a,{gutter:[16,16],children:[Object(T.jsx)(b.a,{md:8,children:Object(T.jsxs)("div",{className:"status",children:["Player"," ",Object(T.jsx)("b",{style:{border:"solid 1px",padding:"1px"},children:"O"})]})}),Object(T.jsx)(b.a,{md:16,children:Object(T.jsx)(d.a,{defaultValue:ae.agent.title,style:{minWidth:"100%"},onChange:function(e){return ce(Object(l.a)(Object(l.a)({},ae),{},{agent:Object(m.find)(D,{title:e})}))},children:Object(m.map)(D,(function(e,t){var n=e.title;return Object(T.jsx)(F,{value:n,children:n},t)}))})})]}),Object(T.jsxs)(o.a,{children:[Object(T.jsx)(b.a,{md:8}),Object(T.jsxs)(b.a,{md:16,children:[Object(T.jsxs)(o.a,{gutter:[8,8],justify:"space-between",children:[Object(T.jsx)(b.a,{children:Object(T.jsxs)(o.a,{gutter:8,children:[Object(T.jsx)(b.a,{children:"Auto"}),Object(T.jsx)(b.a,{children:Object(T.jsx)(O.a,{size:"small",checked:ae.playmode,onChange:function(e){return ce(Object(l.a)(Object(l.a)({},ae),{},{playmode:e}))}})})]})}),Object(T.jsx)(b.a,{children:Object(T.jsx)(h.a,{size:"small",disabled:ae.playmode,onClick:function(){return he(ae.agent.agent)},children:"Evaluate action"})})]}),Object(T.jsx)(o.a,{})]})]})]})}),Object(T.jsx)(b.a,{children:Object(T.jsxs)(u.a,{style:{width:360},children:[Object(T.jsx)(o.a,{justify:"center",align:"middle",gutter:[16,16],children:Object(T.jsx)(b.a,{children:Object(T.jsx)(P,Object(l.a)(Object(l.a)({},n),{},{onMove:function(e){var t=A(n,e);c(t)},evaluateBoard:le,bestAction:oe}))})}),Object(T.jsx)(o.a,{justify:"center",align:"middle",gutter:[16,16],style:{height:60},children:Object(T.jsx)(b.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)("button",{onClick:function(){c(S()),$.agent.agent.newEpisode(),ae.agent.agent.newEpisode(),be(null),se(Object(m.map)(Object(m.range)(0,9),(function(){return null})))},children:"Reset Game"})})})})]})})]}),Object(T.jsxs)(o.a,{justify:"center",align:"stretch",gutter:[16,16],style:{marginTop:"16px"},children:[Object(T.jsx)(b.a,{children:Object(T.jsxs)(u.a,{title:"TRAINING",style:{width:360},children:[Object(T.jsxs)(o.a,{justify:"center",align:"middle",gutter:[8,8],children:[Object(T.jsx)(b.a,{children:"Episodes"}),Object(T.jsx)(b.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)(g.a,{value:v,type:"number",onChange:function(e){return f(e)}})})}),Object(T.jsx)(b.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)(h.a,{type:"primary",onClick:function(){return ue()},disabled:M,children:"Simulate"})})})]}),Object(T.jsx)(o.a,{gutter:[16,16],children:Object(T.jsx)(b.a,{children:Object(T.jsx)(p.a,{columns:[{title:"#",dataIndex:"index",key:"index"},{title:"X Win",dataIndex:"X",key:"X"},{title:"O Win",dataIndex:"O",key:"O"},{title:"Draw",dataIndex:"draw",key:"draw"},{title:"Total",dataIndex:"total",key:"total"}],dataSource:Object(m.map)(J,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{index:t})})),pagination:{pageSize:3,hideOnSinglePage:!0,showLessItems:!0}})})})]})}),Object(T.jsx)(b.a,{children:Object(T.jsxs)(u.a,{title:"EVALUATE",style:{width:360},children:[Object(T.jsxs)(o.a,{justify:"center",align:"middle",gutter:[8,8],children:[Object(T.jsx)(b.a,{children:"Episodes"}),Object(T.jsx)(b.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)(g.a,{value:C,type:"number",onChange:function(e){return E(e)}})})}),Object(T.jsx)(b.a,{children:Object(T.jsx)("div",{children:Object(T.jsx)(h.a,{type:"primary",onClick:function(){return Oe()},children:"Evaluate"})})})]}),Object(T.jsx)(o.a,{gutter:[16,16],children:Object(T.jsx)(b.a,{children:Object(T.jsx)(p.a,{columns:[{title:"#",dataIndex:"index",key:"index"},{title:"X Win",dataIndex:"X",key:"X"},{title:"O Win",dataIndex:"O",key:"O"},{title:"Draw",dataIndex:"draw",key:"draw"},{title:"Total",dataIndex:"total",key:"total"}],dataSource:Object(m.map)(U,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{index:t})})),pagination:{pageSize:3,hideOnSinglePage:!0,showLessItems:!0}})})})]})})]})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,219)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(G,{})}),document.getElementById("root")),V()}},[[212,1,2]]]);
//# sourceMappingURL=main.b2d815ba.chunk.js.map